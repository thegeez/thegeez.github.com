<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en-us" xml:lang="en">
<head>
   <meta content="text/html; charset=utf-8" http-equiv="content-type" />
   <title>thegeez blog - Testing clj-browserchannel</title>
	 <link type="application/atom+xml" title="thegeez blog" rel="alternate" href="/atom.xml" />

   <!-- Homepage CSS -->
   <link media="screen, projection" type="text/css" href="/css/screen.css" rel="stylesheet" />
</head>
<body>
<div class="site">
  <div class="title">
    <a href="/">[<span class="lambda">Î»</span>] thegeez
    blog</a> <a class="extra" href="/">index</a>
  </div>
  
  <div id="content"><h1 id="post-title">Testing clj-browserchannel</h1>10 Jul 2012

<p>The <a href="https://github.com/thegeez/clj-browserchannel">clj-browserchannel</a> project now also contains a test
  project. The <a href="https://github.com/thegeez/clj-browserchannel/tree/master/test">test project</a> contains a small executable test that
  tests the whole browserchannel stack, by using the <a href="https://github.com/thegeez/clj-browserchannel/tree/master/chat-demo">chat-demo</a>
  application. The test project is meant to test the server-side
  component of the BrowserChannel protocol in
  clj-browserchannel. Together with the client-side implementation as
  part of the Google Closure library this provides real-time
  bi-directional communication for web apps.</p>

<p>The test is done by mimicking people chatting in the chat-demo
  application. Testing the server component in clj-browserchannel by
  itself is nearly impossible. This is because the server-side is
  fully dependent on cooperation with the client-side to comply to
  the BrowserChannel protocol. However both the protocol and the
  client-side implementation are very sparsely documented. The
  client-side implementation is a black box that can not easily be
  mocked or stubbed. Therefore the approach is to do <a href="http://thinkrelevance.com/blog/2012/04/26/thinkrelevance-the-podcast-episode-010-stu-halloway">simulation testing</a>.</p>

<p>The people chatting in the chat-demo are programmed through the
  <a href="https://github.com/semperos/clj-webdriver/">clj-webdriver</a> wrapper for Selenium. A chatter can send and receive
  messages. Chatters can also cancel connections to create connection
  failures. This tests the basic promise of the BrowserChannel
  protocol to be resilient to connection failures. At the end of a
  test there is a check to see if all the messages that have been
  sent have been received and have been received in the proper order.</p>

<p>The test project currently contains one scenario, but different
  scenarios can be generated and tested. These scenarios could
  check different write/read ratios, chatter counts, failure rates and different
  browsers. The knobs to tune these parameters are in place.</p>
</div>
  <div id="about-me">
<h3>About thegeez.net</h3>
<p>Hi, I'm Gijs Stuurman, a Clojure programmer from the Netherlands. I
  work on web applications, web services on AWS and machine
  learning in Clojure. I am currently looking for work and/or
  projects. I can work locally in
  Amsterdam, remote and I can travel. Please get in touch via email, which is on my <a href="https://github.com/thegeez">github account</a>.</p>
  </div>
  <div class="footer">
    <div class="contact">
      <p>GitHub: <a href="https://github.com/thegeez">thegeez</a></p>
    </div> 
    <div class="contact">
      <p>Twitter: <a href="http://twitter.com/thegeez">@thegeez</a></p>
    </div>
    <div class="contact">
      <p><a href="/atom.xml">rss</a></p>
    </div>
    <div class="contact">
      <p><a href="/#about">about</a></p>
    </div>
  </div>
</div>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31804668-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>

</html>